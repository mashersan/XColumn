# XColumn

![XColumn Screenshot](http://masherhouse.com/wp-content/uploads/2025/11/TweetDesk_image.jpg) 
TweetDeck（旧）風のシンプルなマルチカラム型クライアントです。X (Twitter) のAPIを使用せず、`WebView2` を利用してカラムを表示します。

## ✨ 主な機能

* **マルチカラム表示**:
    * ホーム、通知、検索、リストをカラムとして自由に追加できます。
    * ドラッグ＆ドロップでカラムの順番を自由に入れ替えられます。
* **カラムごとの自動更新**:
    * カラムごとに「手動更新」ボタンを搭載。
    * カラムごとに自動更新の「有効/無効」と「更新間隔（秒）」を設定できます。
    * 自動更新が有効なカラムには、次の更新までのカウントダウンが表示されます。
    * **アクティブ時停止機能**: アプリ操作中は自動更新を一時停止し、裏へ回った時に再開させることが可能です（設定で切り替え可）。
* **スマートな自動更新 (v1.7.0 New)**:
    * **ソフト更新**: ページ全体を再読み込みせず、キーショートカット（`.`）をシミュレートすることで、画面のチラつきなく新着ポストを取得します。
    * **バックグラウンド更新対応**: アプリが最小化されていても確実に更新が行われます。
    * **誤スクロール防止**: ユーザーがカラムを読んでいる（マウスを置いてスクロールしている）間は、勝手にトップへ戻る更新を行わず、読み終わるのを待ちます。
* **複数アカウント対応（プロファイル機能）**:
    * 画面上部の「プロファイル」メニューから、複数の設定（カラム構成、ウィンドウ位置、ログインアカウント）を切り替えることができます。
    * 「新規」ボタンで仕事用、趣味用など別のアカウント環境を簡単に作成できます。
* **Chrome拡張機能のサポート**:
    * **（v1.5.0+）** 広告ブロックなどのChrome拡張機能をWebView内で使用できます。
    * 管理画面からローカルの拡張機能フォルダを簡単に登録・管理できます。
    * **（v1.5.1）** 初期設定が必要な拡張機能のために、オプション画面を開く機能を追加しました。
* **画面レイアウトのカスタマイズ**:
    * **メニュー非表示**: 左側のメニューバーを非表示にし、コンテンツ幅を最大限に活用できます。
    * **リストヘッダー簡易化**: リストのヘッダー画像や詳細情報を隠し、タイムラインを広く表示できます。
* **フォーカスモード**:
    * カラム内のツイート（ポスト）をクリックすると、そのツイートを単一表示する「フォーカスモード」に切り替わります。
    * フォーカスモードから戻る（または別のページに移動する）と、元のカラム一覧表示が復元されます。
    * 各プロファイルのログイン状態（Cookie）は独立して保存されます。


## 🖥️ 動作要件

* Windows 10 / 11
* [.NET 8.0 デスクトップ ランタイム](https://dotnet.microsoft.com/ja-jp/download/dotnet/8.0)
* [Microsoft Edge WebView2 ランタイム](https://developer.microsoft.com/ja-jp/microsoft-edge/webview2/)
    * （通常、最新のWindowsにはプリインストールされています）

## 🚀 使い方

### 基本操作
1.  `XColumn.exe` を実行します。
2.  **プロファイル**: 必要に応じて「新規」ボタンでプロファイルを作成します。
3.  上部のボタン（ホーム追加、検索追加など）でカラムを追加します。
4.  カラム上部のハンドル（URLが表示されているバー）をドラッグ＆ドロップして、カラムを並べ替えます。
5.  各カラムのヘッダーにあるボタンで、更新や自動更新の設定を行います。

### 拡張機能（広告ブロック等）の導入方法
Chromeウェブストアの拡張機能をXColumnで使用するには、**解凍されたフォルダ**が必要です。

1.  普段お使いのChrome等で、目的の拡張機能をインストールします。
2.  PC内の拡張機能保存フォルダを開きます。
    * Windowsの場合: `%LOCALAPPDATA%\Google\Chrome\User Data\Default\Extensions`
3.  目的の拡張機能IDのフォルダを探し、その中にあるバージョン番号のフォルダ（例: `1.0.0_0`）をコピーします。
    * ※フォルダの中に `manifest.json` が含まれていることを確認してください。
4.  コピーしたフォルダを任意の場所（ドキュメントなど）に保存します。
5.  XColumnを起動し、上部の **「拡張機能」** ボタンを押します。
6.  **「フォルダから追加...」** を押し、保存したフォルダを選択します。
7.  アプリを再起動すると、拡張機能が有効になります。
8.  初期設定が必要な拡張機能の場合、管理画面の **「設定」** ボタンからオプションページを開くことができます。

## 🛠️ ビルド方法 (開発者向け)

1.  このリポジトリをクローンします。
2.  Visual Studio 2022 で `XColumn.sln` を開きます。
3.  .NET 8.0 SDK がインストールされていることを確認します。
4.  NuGet パッケージ マネージャーからパッケージを復元します。
5.  ビルドして実行します。

## 更新履歴

- **v1.7.0 (2025/11/22)**
  - **設定項目の追加**: 自動更新時にページリロードを行うか、ソフト更新を行うかを選択可能に。
    - マウスオーバーかつスクロール中は自動更新（トップ戻り）を防ぐ機能を追加。
- **v1.6.0 (2025/11/22)**
  - **画面表示オプション機能を追加**: 設定画面から以下の表示をカスタマイズ可能になりました。
    - 左側メニューの非表示（ホーム画面 / それ以外のカラムで個別に設定可）
    - リストヘッダー（画像や詳細情報）の簡易表示
- **v1.5.1 (2025/11/19)**
  - **Chrome拡張機能の設定画面機能を追加**: インストール済み拡張機能のオプションページを開けるようになりました。
  - 拡張機能管理画面のUI調整。
- **v1.5.0 (2025/11/18)**
  - **Chrome拡張機能のサポートを追加**: 広告ブロッカーなどを導入可能になりました。
  - ソースコードの大幅な整理とドキュメントコメントの追加。
  - 安定性向上のため、WebView2パッケージのバージョンを安定版に変更。
- **v1.4.2 (2025/11/17)**
  - アプリがアクティブ（操作中）の時に自動更新を一時停止するかどうかを選択できる設定を追加。
  - アプリが非アクティブから復帰した際、タイマーをリセットせず前回の残り時間から再開するように挙動を改善。
- **v1.4.1 (2025/11/17)**
  - 自動更新をONにした直後にカウントダウンが始まらない不具合を修正
  - UI上で現在使用中のプロファイル名が判別しやすいよう改善
  - カラムから直接リポストしようとした際に、フォーカスモードに移行せず、正常にリポストできるよう修正
- **v1.4.0 (2025/11/17)**
  - 複数プロファイル機能を追加（設定だけでなく、Xアカウントのログイン状態も切り替え可能）
  - プロファイルの新規作成、名前変更、削除機能を追加
  - アプリがアクティブ（フォアグラウンド）の時は自動更新を停止し、非アクティブ（バックグラウンド）時に再開するよう変更
  - コードのリファクタリング（機能ごとのファイル分割）
- **v1.3.1 (2025/11/13)**
  - マルチディスプレイ環境において、セカンダリディスプレイ上にウィンドウを配置した際に、ウィンドウの位置とサイズが正しく保存・復元されない不具合を修正
  - （開発）マルチディスプレイ対応（System.Windows.Formsの参照）に伴うビルドエラーを修正
- **v1.3.0 (2025/11/13)**
  - ポスト内の外部リンクをクリックした際、アプリ内ではなく既定のブラウザで開くよう修正
  - アップデート確認ダイアログに、GitHubリリースの更新内容を表示するよう改善
- **v1.2.0 (2025/11/11)**
  - アプリ名を `TweetDesk` から `XColumn` に変更
  - フォーカスモードから戻る際、元のタイムライン表示に戻るよう修正
  - フォーカスモード中に返信画面に移動してもフォーカスが解除されないよう修正
  - 起動時のアップデート確認機能を追加
- **v1.1.0 (2025/11/09)**
  - DPAPI による設定ファイルの暗号化と復号を実装
  - 設定ファイルの拡張子を `.json` から `.dat` に変更
  - 許可ドメインの検証メソッド `IsAllowedDomain` を追加
  - フォーカスモードの復元と遷移ロジックを改善
  - 設定読み込み時のエラーハンドリングを強化
  - デフォルトカラムのロードロジックを改善
- **v1.0.0 (2025/11/09)**
  - 初期リリース (TweetDeskとして)

---

## 📄 ライセンス (License)

このプロジェクトは **MIT ライセンス** の下で公開されています。